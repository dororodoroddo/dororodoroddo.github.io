(function(e){function t(t){for(var r,c,i=t[0],s=t[1],l=t[2],h=0,d=[];h<i.length;h++)c=i[h],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"12c3":function(e,t,n){"use strict";n("8f33")},"420e":function(e,t,n){"use strict";n("a585")},5489:function(e,t,n){},"5c0b":function(e,t,n){"use strict";n("9c0c")},"77b8":function(e,t,n){"use strict";n("5489")},"8f33":function(e,t,n){},"9c0c":function(e,t,n){},a585:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("ThreeApp")],1)},a=[],c=n("bee2"),i=n("d4ec"),s=n("262e"),l=n("2caf"),u=n("9ab4"),h=n("1b40"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"three-app"},[n("html-control",{attrs:{state:e.state}}),n("controller",{on:{onMove:e.onMove}})],1)},v=[],m=n("5530"),p=n("1da1"),f=(n("96cf"),n("d3b7"),n("159b"),n("5a89")),y=75,b=window.innerWidth/window.innerHeight,w=.1,j=1e3;function M(){var e=new f["e"](y,b,w,j);return e.position.x=0,e.position.y=1.5,e.position.z=-7,e.lookAt(0,1.5,-1),e}var g=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joystick__area"},[n("div",{staticClass:"joystick__stick"})])}],x=(n("99af"),0),O=0,k=0,z=0,S=!1,_=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"mounted",value:function(){"ontouchstart"in document.documentElement?(document.addEventListener("touchstart",this.onTouchSt,!1),document.addEventListener("touchmove",this.onTouchMv,!1),document.addEventListener("touchend",this.onTouchEd,!1),document.addEventListener("touchcancel",this.onTouchEd,!1)):(document.addEventListener("mousedown",this.onMouceSt,!1),document.addEventListener("mousemove",this.onMouceMv,!1),document.addEventListener("mouseup",this.onMouceEd,!1))}},{key:"beforeDestroy",value:function(){document.removeEventListener("touchstart",this.onTouchSt),document.removeEventListener("touchmove",this.onTouchMv),document.removeEventListener("touchend",this.onTouchEd),document.removeEventListener("touchcancel",this.onTouchEd),document.removeEventListener("mousedown",this.onMouceSt,!1),document.removeEventListener("mousemove",this.onMouceMv,!1),document.removeEventListener("mouseup",this.onMouceEd,!1)}},{key:"onTouchSt",value:function(e){for(var t=this.$el.querySelector(".joystick__stick"),n=0;n<e.touches.length;n+=1){var r;(null===(r=e.touches[n])||void 0===r?void 0:r.target)===t&&(x=e.touches[n].screenX,O=e.touches[n].screenY,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"),S||(S=!0,requestAnimationFrame(this.move)))}}},{key:"onTouchMv",value:function(e){if(S)for(var t=this.$el.querySelector(".joystick__stick"),n=0;n<e.touches.length;n+=1){var r;if((null===(r=e.touches[n])||void 0===r?void 0:r.target)===t){var o=e.touches[n].screenX-x,a=e.touches[n].screenY-O,c=Math.sqrt(o*o+a*a);c=c>50?50/c:1,k=o*c,z=a*c,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)")}}}},{key:"onTouchEd",value:function(e){if(S){for(var t=this.$el.querySelector(".joystick__stick"),n=!1,r=0;r<e.touches.length;r+=1){var o;(null===(o=e.touches[r])||void 0===o?void 0:o.target)===t&&(n=!0)}n||(S=!1,k=0,z=0,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"))}}},{key:"onMouceSt",value:function(e){var t=this.$el.querySelector(".joystick__stick");e.target===t&&(x=e.screenX,O=e.screenY,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"),S||(S=!0,requestAnimationFrame(this.move)))}},{key:"onMouceMv",value:function(e){var t=this.$el.querySelector(".joystick__stick");if(S){var n=e.screenX-x,r=e.screenY-O,o=Math.sqrt(n*n+r*r);o=o>50?50/o:1,k=n*o,z=r*o,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)")}}},{key:"onMouceEd",value:function(){var e=this.$el.querySelector(".joystick__stick");S&&(S=!1,k=0,z=0,e.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"))}},{key:"move",value:function(){S&&(this.$emit("onMove",[k,z]),requestAnimationFrame(this.move))}}]),n}(h["c"]);_=Object(u["a"])([h["a"]],_);var P=_,L=P,T=(n("12c3"),n("2877")),X=Object(T["a"])(L,g,E,!1,null,"620b1f4a",null),Y=X.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"html-control"})},I=[],q=(n("d81d"),n("ac1f"),n("1276"),n("bc3a")),R=n.n(q),A=[{x:-20,y:30},{x:20,y:10},{x:30,y:-30},{x:0,y:0}],C=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.map={xMax:300,yMax:300},e.moving=!1,e.init=!1,e.minimapSize=0,e.screenSize=[0,0],e.screenRatio=0,e.objects=[{type:"html",element:document.createElement("div"),innerElements:[],contentF:"",contentB:"",state:{x:A[3].x,y:A[3].y,z:2,thetaXY:20,thetaZ:0,width:1,height:1}}],e}return Object(c["a"])(n,[{key:"onResize",value:function(){this.screenSize=[window.innerWidth,window.innerHeight],this.screenRatio=this.screenSize[1]/this.screenSize[0]}},{key:"mounted",value:function(){var e=this;this.onResize(),document.addEventListener("resize",this.onResize),this.objects.forEach((function(t){var n=t,r=null;if("img"===n.type)if(n.element.className="img-container",r=document.createElement("img"),r.src=n.contentF,r.className="img-front",n.innerElements.push(r),""!==n.contentB){var o=document.createElement("img");o.src=n.contentB,o.style.width="1px",o.style.height="1px",o.style.backfaceVisibility="hidden",o.style.webkitBackfaceVisibility="hidden",n.element.appendChild(o),n.innerElements.push(o)}else r.style.backfaceVisibility="visible",n.innerElements=[r];else if("html"===n.type){n.element.className="html-container",r=document.createElement("div");var a=document.createElement("div");r.className="html-item",a.className="html-inner",R.a.get("https://dororodoroddo.github.io/notion.html").then((function(e){var t=e.data;t=t.split("<body>")[1],t=t.split("</body>")[0],a.innerHTML=t,r.appendChild(a)})),n.innerElements.push(r),n.innerElements.push(a)}r&&n.element.appendChild(r),e.$el.appendChild(n.element)})),this.moveObjects()}},{key:"moveObjects",value:function(){var e=this,t=Math.PI,n=[0,5/24*t];n[0]=n[1]*(this.screenSize[0]/this.screenSize[1]),this.objects.forEach((function(r){var o=r,a=e.getRelativeProperty(o.state.x,o.state.y,o.state.z),c=a.relX,i=a.relY,s=a.relAngleZ,l=a.relAngleXY;if(Math.abs(s)<1.4){"0"===o.element.style.opacity&&(o.element.style.opacity="1");var u=Math.sqrt(c*c+i*i),h=2*Math.atan(o.state.width/2/u)/n[0]*e.screenSize[0],d=2*Math.atan(o.state.height/2/u)/n[0]*e.screenSize[0],v=o.state.thetaXY*t/180,m=o.state.thetaZ*t/180-Math.atan2(-i,-c)-t,p=e.screenSize[0]/2/n[0],f=s*p;o.element.style.transform="translate(".concat(e.screenSize[0]/2-f,"px, ").concat(-(e.screenSize[1]/2-l*n[1]*e.screenSize[1]),"px)"),"img"===o.type?(o.innerElements[0].style.transform="translate(-50%, -50%) scaleX(".concat(h,") scaleY(").concat(d,") perspective(").concat(u,"px) rotateY(").concat(m,"rad) rotateX(").concat(v,"rad)"),2===o.innerElements.length&&(o.innerElements[1].style.transform="scaleX(".concat(h,") scaleY(").concat(d,") perspective(").concat(u,"px) rotateY(").concat(m+Math.PI,"rad) rotateX(").concat(-v,"rad)"))):"html"===o.type&&(console.log(e.screenSize[1]*u),o.innerElements[0].style.transform="translate(-50%, -50%) scaleX(".concat(h/e.screenSize[0],") scaleY(").concat(d/e.screenSize[1],")"),o.innerElements[1].style.transform="translate(-50%, 0) perspective(".concat(e.screenSize[1]*u,"px) rotateY(").concat(m,"rad) rotateX(").concat(v,"rad)")),o.element.style.zIndex="".concat(e.map.xMax+e.map.yMax-Math.floor(u))}else"0"!==o.element.style.opacity&&(o.element.style.opacity="0")}))}},{key:"getRelativeProperty",value:function(e,t,n){var r=e-this.state.x,o=t-this.state.y,a=n-this.state.z,c=Math.atan2(o,r)-this.state.thetaZ;while(c<-Math.PI||c>Math.PI)c<-Math.PI?c+=2*Math.PI:c-=2*Math.PI;var i=-Math.atan2(a,Math.sqrt(r*r+o*o));while(i<-Math.PI||i>Math.PI)i<-Math.PI?i+=2*Math.PI:i-=2*Math.PI;return{relX:r,relY:o,relZ:a,relAngleZ:c,relAngleXY:i}}}]),n}(h["c"]);Object(u["a"])([Object(h["b"])()],C.prototype,"state",void 0),Object(u["a"])([Object(h["d"])("state")],C.prototype,"moveObjects",null),C=Object(u["a"])([Object(h["a"])({components:{}})],C);var Z=C,H=Z,F=(n("77b8"),Object(T["a"])(H,$,I,!1,null,"5d8b4f5e",null)),N=F.exports,W=Math.PI,B=7,V=[0,1.5,-5],D=0,J=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.inner={width:window.innerWidth,height:window.innerHeight},e.state={x:-7,y:0,z:1.5,thetaXY:0,thetaZ:0},e}return Object(c["a"])(n,[{key:"onResize",value:function(){this.inner={width:window.innerWidth,height:window.innerHeight},this.renderer.setSize(this.inner.width,this.inner.height),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.fov=75,this.renderer.render(this.scene,this.camera)}},{key:"mounted",value:function(){this.renderer=new f["k"],this.renderer.setSize(this.inner.width,this.inner.height),this.$el.appendChild(this.renderer.domElement),this.camera=M(),this.scene=new f["h"],this.initObject(),window.addEventListener("resize",this.onResize)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"initObject",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=(new f["j"]).load("running.jpg"),setTimeout((function(){var e=new f["f"](2*B,2*B),r=new f["d"]({color:16777215,map:t});n.land=new f["c"](e,r),n.land.position.set(0,0,0),n.land.rotateX(-W/2),n.scene.add(n.land);var o=new f["f"](2*B,2*B),a=new f["d"]({color:16777181,side:f["b"]}),c=new f["c"](o,a);c.position.set(0,0,B),c.rotation.z=W/2,n.scene.add(c);var i=new f["d"]({color:16768511,side:f["b"]}),s=new f["c"](o,i);s.position.set(0,0,-B),s.rotation.z=W/2,n.scene.add(s);var l=new f["d"]({color:14548991,side:f["b"]}),u=new f["c"](o,l);u.position.set(-B,0,0),u.rotation.y=W/2,n.scene.add(u);var h=new f["d"]({color:16637951,side:f["b"]}),d=new f["c"](o,h);d.position.set(B,0,0),d.rotation.y=W/2,n.scene.add(d);var v=new f["i"](.4,32,16),m=new f["d"]({color:11184895});n.sphere=new f["c"](v,m),n.sphere.position.set(0,0,-5),n.scene.add(n.sphere),A.forEach((function(e){var t=new f["a"](1.5,1.5,1.5,100),r=new f["d"]({color:8900331}),o=new f["c"](t,r);o.position.set(e.y,0,e.x),n.scene.add(o)}));var p=new f["g"](14540287,.9);p.castShadow=!0,p.position.set(0,2*B,0),n.scene.add(p),n.renderer.render(n.scene,n.camera)}),300);case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onMove",value:function(e){D-=e[0]*(W/4e3);var t=Math.cos(D),n=Math.sin(D),r=-e[1]*n*.002,o=-e[1]*t*.002;V=K(V,o,r),this.sphere.position.set(V[0],0,V[2]),this.state=Object(m["a"])(Object(m["a"])({},this.state),{},{x:V[2]-2*t,y:V[0]-2*n,thetaZ:D}),this.camera.position.x=V[0]-2*n,this.camera.position.z=V[2]-2*t,this.camera.lookAt(V[0]+4*n,V[1],V[2]+4*t),this.renderer.render(this.scene,this.camera)}}]),n}(h["c"]);J=Object(u["a"])([Object(h["a"])({components:{Controller:Y,HtmlControl:N}})],J);var G=J;function K(e,t,n){var r=e[2],o=e[0],a=r+t,c=o+n,i=[c,e[1],a];if((r+t>B-2||r+t<2-B)&&(i[2]=B-2,!0),(o+n>B-2||o+n<2-B)&&(i[0]=B-2,!0),Q(r+t,o)<3.61){var s=[o,-r];i[2]=r+s[0]*(t*s[0]+n*s[1])/(s[0]*s[0]+s[1]*s[1])}if(Q(r,o+t)<3.61){var l=[o,-r];i[0]=o+l[1]*(t*l[0]+n*l[1])/(l[0]*l[0]+l[1]*l[1])}return i}function Q(e,t){return e*e+t*t}var U=G,ee=(n("420e"),Object(T["a"])(U,d,v,!1,null,"7d05a20f",null)),te=ee.exports,ne=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n)}(h["c"]);ne=Object(u["a"])([Object(h["a"])({components:{ThreeApp:te}})],ne);var re=ne,oe=re,ae=(n("5c0b"),Object(T["a"])(oe,o,a,!1,null,null,null)),ce=ae.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(ce)}}).$mount("#app")}});
//# sourceMappingURL=app.8b08f839.js.map