(function(e){function t(t){for(var r,o,i=t[0],s=t[1],l=t[2],h=0,d=[];h<i.length;h++)o=i[h],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&d.push(c[o][0]),c[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==c[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},c={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"12c3":function(e,t,n){"use strict";n("8f33")},"18ae":function(e,t,n){},"3cf6":function(e,t,n){"use strict";n("18ae")},"45fc":function(e,t,n){},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5f03":function(e,t,n){"use strict";n("45fc")},"8f33":function(e,t,n){},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("ThreeApp")],1)},a=[],o=n("bee2"),i=n("d4ec"),s=n("262e"),l=n("2caf"),u=n("9ab4"),h=n("1b40"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"three-app"},[n("html-control",{attrs:{state:e.state}}),n("controller",{on:{onMove:e.onMove}})],1)},v=[],m=n("5530"),p=n("1da1"),f=(n("96cf"),n("d3b7"),n("159b"),n("5a89")),y=75,b=window.innerWidth/window.innerHeight,w=.1,j=1e3;function M(){var e=new f["e"](y,b,w,j);return e.position.x=0,e.position.y=1.5,e.position.z=-7,e.lookAt(0,1.5,-1),e}var g=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joystick__area"},[n("div",{staticClass:"joystick__stick"})])}],E=(n("99af"),0),O=0,k=0,z=0,S=!1,_=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"mounted",value:function(){"ontouchstart"in document.documentElement?(document.addEventListener("touchstart",this.onTouchSt,!1),document.addEventListener("touchmove",this.onTouchMv,!1),document.addEventListener("touchend",this.onTouchEd,!1),document.addEventListener("touchcancel",this.onTouchEd,!1)):(document.addEventListener("mousedown",this.onMouceSt,!1),document.addEventListener("mousemove",this.onMouceMv,!1),document.addEventListener("mouseup",this.onMouceEd,!1))}},{key:"beforeDestroy",value:function(){document.removeEventListener("touchstart",this.onTouchSt),document.removeEventListener("touchmove",this.onTouchMv),document.removeEventListener("touchend",this.onTouchEd),document.removeEventListener("touchcancel",this.onTouchEd),document.removeEventListener("mousedown",this.onMouceSt,!1),document.removeEventListener("mousemove",this.onMouceMv,!1),document.removeEventListener("mouseup",this.onMouceEd,!1)}},{key:"onTouchSt",value:function(e){for(var t=this.$el.querySelector(".joystick__stick"),n=0;n<e.touches.length;n+=1){var r;(null===(r=e.touches[n])||void 0===r?void 0:r.target)===t&&(E=e.touches[n].screenX,O=e.touches[n].screenY,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"),S||(S=!0,requestAnimationFrame(this.move)))}}},{key:"onTouchMv",value:function(e){if(S)for(var t=this.$el.querySelector(".joystick__stick"),n=0;n<e.touches.length;n+=1){var r;if((null===(r=e.touches[n])||void 0===r?void 0:r.target)===t){var c=e.touches[n].screenX-E,a=e.touches[n].screenY-O,o=Math.sqrt(c*c+a*a);o=o>50?50/o:1,k=c*o,z=a*o,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)")}}}},{key:"onTouchEd",value:function(e){if(S){for(var t=this.$el.querySelector(".joystick__stick"),n=!1,r=0;r<e.touches.length;r+=1){var c;(null===(c=e.touches[r])||void 0===c?void 0:c.target)===t&&(n=!0)}n||(S=!1,k=0,z=0,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"))}}},{key:"onMouceSt",value:function(e){var t=this.$el.querySelector(".joystick__stick");e.target===t&&(E=e.screenX,O=e.screenY,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"),S||(S=!0,requestAnimationFrame(this.move)))}},{key:"onMouceMv",value:function(e){var t=this.$el.querySelector(".joystick__stick");if(S){var n=e.screenX-E,r=e.screenY-O,c=Math.sqrt(n*n+r*r);c=c>50?50/c:1,k=n*c,z=r*c,t.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)")}}},{key:"onMouceEd",value:function(){var e=this.$el.querySelector(".joystick__stick");S&&(S=!1,k=0,z=0,e.style.transform="translate(calc(-50% + ".concat(k,"px), calc(-50% + ").concat(z,"px)"))}},{key:"move",value:function(){S&&(this.$emit("onMove",[k,z]),requestAnimationFrame(this.move))}}]),n}(h["c"]);_=Object(u["a"])([h["a"]],_);var P=_,L=P,T=(n("12c3"),n("2877")),X=Object(T["a"])(L,g,x,!1,null,"620b1f4a",null),Y=X.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"html-control"})},I=[],q=(n("d81d"),n("ac1f"),n("1276"),n("bc3a")),R=n.n(q),A=[{x:-20,y:30},{x:20,y:10},{x:30,y:-30},{x:0,y:0}];function C(e,t){return!(e>7||e<-7)&&!(t>7||t<-7)}var Z=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.map={xMax:7,yMax:7},e.moving=!1,e.init=!1,e.minimapSize=0,e.screenSize=[0,0],e.screenRatio=0,e.objects=[{type:"html",element:document.createElement("div"),innerElements:[],contentF:"",contentB:"",state:{x:A[3].x,y:A[3].y,z:2,thetaXY:20,thetaZ:0,width:1,height:1}}],e}return Object(o["a"])(n,[{key:"onResize",value:function(){this.screenSize=[window.innerWidth,window.innerHeight],this.screenRatio=this.screenSize[1]/this.screenSize[0]}},{key:"mounted",value:function(){var e=this;this.onResize(),document.addEventListener("resize",this.onResize),this.objects.forEach((function(t){var n=t,r=null;if("img"===n.type)if(n.element.className="img-container",r=document.createElement("img"),r.src=n.contentF,r.className="img-front",n.innerElements.push(r),""!==n.contentB){var c=document.createElement("img");c.src=n.contentB,c.style.width="1px",c.style.height="1px",c.style.backfaceVisibility="hidden",c.style.webkitBackfaceVisibility="hidden",n.element.appendChild(c),n.innerElements.push(c)}else r.style.backfaceVisibility="visible",n.innerElements=[r];else if("html"===n.type){n.element.className="html-container",r=document.createElement("div");var a=document.createElement("div");r.className="html-item",a.className="html-inner",R.a.get("https://dororodoroddo.github.io/notion.html").then((function(e){var t=e.data;t=t.split("<body>")[1],t=t.split("</body>")[0],a.innerHTML=t,r.appendChild(a)})),n.innerElements.push(r),n.innerElements.push(a)}r&&n.element.appendChild(r),e.$el.appendChild(n.element)})),this.moveObjects()}},{key:"moveObjects",value:function(){var e=this,t=Math.PI,n=[0,5/24*t];n[0]=n[1]*(this.screenSize[0]/this.screenSize[1]),this.objects.forEach((function(r){var c=r,a=e.getRelativeProperty(c.state.x,c.state.y,c.state.z),o=a.relX,i=a.relY,s=a.relAngleZ,l=a.relAngleXY;if(C(e.state.x,e.state.y)&&Math.abs(s)<1.4){"0"===c.element.style.opacity&&(c.element.style.opacity="1");var u=Math.sqrt(o*o+i*i),h=2*Math.atan(c.state.width/2/u)/n[0]*e.screenSize[0],d=2*Math.atan(c.state.height/2/u)/n[0]*e.screenSize[0],v=c.state.thetaXY*t/180,m=c.state.thetaZ*t/180-Math.atan2(-i,-o)-t,p=e.screenSize[0]/2/n[0],f=s*p;c.element.style.transform="translate(".concat(e.screenSize[0]/2-f,"px, ").concat(-(e.screenSize[1]/2-l*n[1]*e.screenSize[1]),"px)"),"img"===c.type?(c.innerElements[0].style.transform="translate(-50%, -50%) scaleX(".concat(h,") scaleY(").concat(d,") perspective(").concat(u,"px) rotateY(").concat(m,"rad) rotateX(").concat(v,"rad)"),2===c.innerElements.length&&(c.innerElements[1].style.transform="scaleX(".concat(h,") scaleY(").concat(d,") perspective(").concat(u,"px) rotateY(").concat(m+Math.PI,"rad) rotateX(").concat(-v,"rad)"))):"html"===c.type&&(console.log(e.screenSize[1]*u),c.innerElements[0].style.transform="translate(-50%, -50%) scaleX(".concat(h/e.screenSize[0],") scaleY(").concat(d/e.screenSize[1],")"),c.innerElements[1].style.transform="translate(-50%, 0) perspective(".concat(e.screenSize[1]*u,"px) rotateY(").concat(m,"rad) rotateX(").concat(v,"rad)")),c.element.style.zIndex="".concat(e.map.xMax+e.map.yMax-Math.floor(u))}else"0"!==c.element.style.opacity&&(c.element.style.opacity="0")}))}},{key:"getRelativeProperty",value:function(e,t,n){var r=e-this.state.x,c=t-this.state.y,a=n-this.state.z,o=Math.atan2(c,r)-this.state.thetaZ;while(o<-Math.PI||o>Math.PI)o<-Math.PI?o+=2*Math.PI:o-=2*Math.PI;var i=-Math.atan2(a,Math.sqrt(r*r+c*c));while(i<-Math.PI||i>Math.PI)i<-Math.PI?i+=2*Math.PI:i-=2*Math.PI;return{relX:r,relY:c,relZ:a,relAngleZ:o,relAngleXY:i}}}]),n}(h["c"]);Object(u["a"])([Object(h["b"])()],Z.prototype,"state",void 0),Object(u["a"])([Object(h["d"])("state")],Z.prototype,"moveObjects",null),Z=Object(u["a"])([Object(h["a"])({components:{}})],Z);var H=Z,F=H,N=(n("5f03"),Object(T["a"])(F,$,I,!1,null,"415068d6",null)),W=N.exports,B=Math.PI,V=7,D=[0,1.5,-5],J=0,G=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.inner={width:window.innerWidth,height:window.innerHeight},e.state={x:-7,y:0,z:1.5,thetaXY:0,thetaZ:0},e}return Object(o["a"])(n,[{key:"onResize",value:function(){this.inner={width:window.innerWidth,height:window.innerHeight},this.renderer.setSize(this.inner.width,this.inner.height),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.fov=75,this.renderer.render(this.scene,this.camera)}},{key:"mounted",value:function(){this.renderer=new f["k"],this.renderer.setSize(this.inner.width,this.inner.height),this.$el.appendChild(this.renderer.domElement),this.camera=M(),this.scene=new f["h"],this.initObject(),window.addEventListener("resize",this.onResize)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"initObject",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=(new f["j"]).load("running.jpg"),setTimeout((function(){var e=new f["f"](2*V,2*V),r=new f["d"]({color:16777215,map:t});n.land=new f["c"](e,r),n.land.position.set(0,0,0),n.land.rotateX(-B/2),n.scene.add(n.land);var c=new f["f"](2*V,2*V),a=new f["d"]({color:16777181,side:f["b"]}),o=new f["c"](c,a);o.position.set(0,0,V),o.rotation.z=B/2,n.scene.add(o);var i=new f["d"]({color:16768511,side:f["b"]}),s=new f["c"](c,i);s.position.set(0,0,-V),s.rotation.z=B/2,n.scene.add(s);var l=new f["d"]({color:14548991,side:f["b"]}),u=new f["c"](c,l);u.position.set(-V,0,0),u.rotation.y=B/2,n.scene.add(u);var h=new f["d"]({color:16637951,side:f["b"]}),d=new f["c"](c,h);d.position.set(V,0,0),d.rotation.y=B/2,n.scene.add(d);var v=new f["i"](.4,32,16),m=new f["d"]({color:11184895});n.sphere=new f["c"](v,m),n.sphere.position.set(0,0,-5),n.scene.add(n.sphere),A.forEach((function(e){var t=new f["a"](1.5,1.5,1.5,100),r=new f["d"]({color:8900331}),c=new f["c"](t,r);c.position.set(e.y,0,e.x),n.scene.add(c)}));var p=new f["g"](14540287,.9);p.castShadow=!0,p.position.set(0,2*V,0),n.scene.add(p),n.renderer.render(n.scene,n.camera)}),300);case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onMove",value:function(e){J-=e[0]*(B/4e3);var t=Math.cos(J),n=Math.sin(J),r=-e[1]*n*.002,c=-e[1]*t*.002;D=Q(D,c,r),this.sphere.position.set(D[0],0,D[2]);var a=D[2]-2*t,o=D[0]-2*n;this.state=Object(m["a"])(Object(m["a"])({},this.state),{},{x:a,y:o,thetaZ:J}),this.camera.position.x=D[0]-2*n,this.camera.position.z=D[2]-2*t,this.camera.lookAt(D[0]+4*n,D[1],D[2]+4*t),this.renderer.render(this.scene,this.camera)}}]),n}(h["c"]);G=Object(u["a"])([Object(h["a"])({components:{Controller:Y,HtmlControl:W}})],G);var K=G;function Q(e,t,n){var r=e[2],c=e[0],a=r+t,o=c+n,i=[o,e[1],a],s=!1,l=.4;if(r+t>V-l?(i[2]=V-l,s=!0):r+t<.4-V&&(i[2]=-(V-l),s=!0),c+n>V-l?(i[0]=V-l,s=!0):c+n<-V+l&&(i[0]=-(V-l),s=!0),s)return i;if(U(r+t,c)<3.61){var u=[c,-r];i[2]=r+u[0]*(t*u[0]+n*u[1])/(u[0]*u[0]+u[1]*u[1])}if(U(r,c+t)<3.61){var h=[c,-r];i[0]=c+h[1]*(t*h[0]+n*h[1])/(h[0]*h[0]+h[1]*h[1])}return i}function U(e,t){return e*e+t*t}var ee=K,te=(n("3cf6"),Object(T["a"])(ee,d,v,!1,null,"ae8df702",null)),ne=te.exports,re=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n)}(h["c"]);re=Object(u["a"])([Object(h["a"])({components:{ThreeApp:ne}})],re);var ce=re,ae=ce,oe=(n("5c0b"),Object(T["a"])(ae,c,a,!1,null,null,null)),ie=oe.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(ie)}}).$mount("#app")}});